(function(A,B){$window=A(B);A.fn.lazyload=function(D){var C=this;var E={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:B,data_attribute:"original",skip_invisible:true,appear:null,load:null};function F(){var G=0;C.each(function(){var H=A(this);if(E.skip_invisible&&!H.is(":visible")){return}if(A.abovethetop(this,E)||A.leftofbegin(this,E)){}else{if(!A.belowthefold(this,E)&&!A.rightoffold(this,E)){H.trigger("appear")}else{if(++G>E.failure_limit){return false}}}})}if(D){if(undefined!==D.failurelimit){D.failure_limit=D.failurelimit;delete D.failurelimit}if(undefined!==D.effectspeed){D.effect_speed=D.effectspeed;delete D.effectspeed}A.extend(E,D)}$container=(E.container===undefined||E.container===B)?$window:A(E.container);if(0===E.event.indexOf("scroll")){$container.bind(E.event,function(G){return F()})}this.each(function(){var H=this;var G=A(H);H.loaded=false;G.one("appear",function(){if(!this.loaded){if(E.appear){var I=C.length;E.appear.call(H,I,E)}A("<img />").bind("load",function(){G.hide().attr("src",G.data(E.data_attribute))[E.effect](E.effect_speed);H.loaded=true;var K=A.grep(C,function(L){return !L.loaded});C=A(K);if(E.load){var J=C.length;E.load.call(H,J,E)}}).attr("src",G.data(E.data_attribute))}});if(0!==E.event.indexOf("scroll")){G.bind(E.event,function(I){if(!H.loaded){G.trigger("appear")}})}});$window.bind("resize",function(G){F()});F();return this};A.belowthefold=function(C,E){var D;if(E.container===undefined||E.container===B){D=$window.height()+$window.scrollTop()}else{D=$container.offset().top+$container.height()}return D<=A(C).offset().top-E.threshold};A.rightoffold=function(C,E){var D;if(E.container===undefined||E.container===B){D=$window.width()+$window.scrollLeft()}else{D=$container.offset().left+$container.width()}return D<=A(C).offset().left-E.threshold};A.abovethetop=function(C,E){var D;if(E.container===undefined||E.container===B){D=$window.scrollTop()}else{D=$container.offset().top}return D>=A(C).offset().top+E.threshold+A(C).height()};A.leftofbegin=function(C,E){var D;if(E.container===undefined||E.container===B){D=$window.scrollLeft()}else{D=$container.offset().left}return D>=A(C).offset().left+E.threshold+A(C).width()};A.inviewport=function(C,D){return !A.rightofscreen(C,D)&&!A.leftofscreen(C,D)&&!A.belowthefold(C,D)&&!A.abovethetop(C,D)};A.extend(A.expr[":"],{"below-the-fold":function(C){return A.belowthefold(C,{threshold:0,container:B})},"above-the-top":function(C){return !A.belowthefold(C,{threshold:0,container:B})},"right-of-screen":function(C){return A.rightoffold(C,{threshold:0,container:B})},"left-of-screen":function(C){return !A.rightoffold(C,{threshold:0,container:B})},"in-viewport":function(C){return !A.inviewport(C,{threshold:0,container:B})},"above-the-fold":function(C){return !A.belowthefold(C,{threshold:0,container:B})},"right-of-fold":function(C){return A.rightoffold(C,{threshold:0,container:B})},"left-of-fold":function(C){return !A.rightoffold(C,{threshold:0,container:B})}})})(jQuery,window);